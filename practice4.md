# Практика 4 — 5.1 Шардирование

## ТЗ

- Реализовать шардированное хранилище geojson базы данных
- Данные шардировать по geo квадратам
- Реализовать `map/reduce` запрос по координатом

## Архитектура

![Architecture](img/practice4-arch.png)

## ТЗ

Несколько `Storage` объединённых вместе являются одним шардом.
Несколько шардов являются масштабированным хранилищем.
Каждый шард хранит свой набор данных.

Структура `Router` должна хранить таблицу маршрутизации.
Таблица маршрутизации это rtree индекс: где карта разбита на секторы и для каждого сектора существует своя структура шарда.
```golang
struct Shard {
  leaderAddr string,
  replicase string,
}
```

Сервис `Router` должен перенаправлять запросы в соответветствии с таблицей маршрутизации.
